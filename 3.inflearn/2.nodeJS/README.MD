# Node.js 교과서 - 기본부터 프로젝트 실습까지

강의 링크 : https://www.inflearn.com/course/%EB%85%B8%EB%93%9C-%EA%B5%90%EA%B3%BC%EC%84%9C/dashboard

## 수강 이유

- Javascripts 학습에 도움이 될 것 같아서
- JS로 다 해보고 싶어서

---

### Chap.1 노드 시작하기

#### 노드의 정의

**Node.js는 크롬 V8 자바스크립트 엔진으로 빌드 된 자바 스크립트 실행기**
서버의 역활도 수행할 수 있다.(**서버가 아님**)

노드는 V8과 libuv를 내부적으로 포함
V8 엔진: 오픈 소스 자바스크립트 엔진] -> 속도 문제 개선
libuv: 노드의 특성인 이벤트 기반, 비동기 I/O 모델을 구현한 라이브러리

싱글 쓰레드 비동기모델로, 인기를 끌게 되었다.(멀티쓰레딩은 코딩이 복잡함)

#### 노드의 특성

##### 1. 이벤트 기반

이벤트가 발생할 때 미리 지정해둔 작업을 수행하는 방식
이벤트의 예: 클릭, 네트워크 요청, 타이머 등
이벤트 리스너: 이벤트를 등록하는 함수
콜백 함수: 이벤트가 발생했을 때 실행될 함수

시스템 -> 이벤트 발생 -> 이벤트 리스너 -> 등록된 콜백 함수 호출
<br />

##### 2. 논블로킹 I/O

논 블로킹: 오래 걸리는 함수를 백그라운드로 보내서 다음 코드가 먼저 실행되게 하고, 나중에 오래 걸리는 함수를 실행

- 논 블로킹 방식 하에서 일부 코드는 백그라운드에서 병렬로 실행됨
- 일부 코드: I/O 작업(파일 시스템 접근, 네트워크 요청), 압축, 암호화 등
- 나머지 코드는 블로킹 방식으로 실행됨
- I/O 작업이 많을 때 노드 활용성이 극대화

노드에서는 동기이면서 블록킹, 비동기이면서 논 블록킹이다.
**동기일 때는 코드가 순차적으로, 비동기일 때는 순차적으로 실행 되지 않는다.**
<br />

##### 3. 프로세스와 스레드

프로세스: 운영체제에서 할당하는 작업의 단위, 프로세스 간 자원 공유X
스레드: 프로세스 내에서 실행되는 작업의 단위, 부모 프로세스 자원 공유

크롬이라는 프로세스에서 각각의 탭(스레드)가 돌아간다
노드는 탭을 하나만 뛰울수 있다고 보면 됌

노드 프로세스는 멀티 스레드이지만 직접 다룰 수 있는 스레드는 하나이기 때문에 싱글 스레드라고 표현
14 버전 이후부터는 멀티 스레드 사용가능
<br />

##### 4. 싱글 스레드

싱글 스레드라 주어진 일을 하나밖에 처리하지 못함 -> 비효율
그래서 논 블로킹 모델을 채택하여 일부 코드(I/O)를 백그라운드(다른 프로세스)에서 실행 가능
요청을 먼저 받고, 완료될 때 응답함
I/O 관련 코드가 아닌 경우 싱글 스레드, 블로킹 모델과 같음
<br />

##### 5. 멀티 스레드 모델과의 비교

- 싱글 스레드 모델은 에러를 처리하지 못하는 경우 멈춤
  프로그래밍 난이도 쉽고, CPU, 메모리 자원 적게 사용

- 멀티 스레드 모델은 에러 발생 시 새로운 스레드를 생성하여 극복
  단, 새로운 스레드 생성이나 놀고 있는 스레드 처리에 비용 발생
  프로그래밍 난이도 어려움
  스레드 수만큼 자원을 많이 사용함

<br />

---

#### 노드의 역활

##### 1. 서버로서의 노드

- 서버: 네트워크를 통해 클라이언트에 정보나 서비스를 제공하는 컴퓨터 또는 프로그램
- 클라이언트: 서버에 요청을 보내는 주체(브라우저, 데스크탑 프로그램, 모바일 앱, 다른 서버에 요청을 보내는 서버)

<br />

##### 2. 서버외의 노드

자바스크립트 런타임이기 때문에 용도가 서버에만 한정되지 않음
웹, 모바일, 데스크탑 애플리케이션에도 사용
웹 프레임워크: Angular, React, Vue, Meteor 등
모바일 앱 프레임워크: React Native
데스크탑 개발 도구: Electron(Atom, Slack, VSCode, Discord 등 제작)
위 프레임워크가 노드 기반으로 동작함
<br />

---

---

### Chap.2 자바 스크립트 문법

#### 2.1 호출 스택, 이벤트 루프

##### 1. 호출 스택

호출 스택(함수의 호출, 자료구조의 스택)

- Anonymous은 가상의 전역 컨텍스트(항상 있다고 생각하는게 좋음)
- 함수 호출 순서대로 쌓이고, 역순으로 실행됨
- 함수 실행이 완료되면 스택에서 빠짐

<br />

##### 2. 이벤트 루프

**자바스크립트 동작원리**

이벤트 루프 구조(호출스택, 백그라운드, 태스크 큐)

- 이벤트 루프: 이벤트 발생(setTimeout 등) 시 호출할 콜백 함수들(위의 예제에서는 run)을 관리하고, 호출할 순서를 결정하는 역할
- 백그라운드: 타이머나 I/O 작업 콜백, 이벤트 리스너들이 대기하는 공간. 여러 작업이 동시에 실행될 수 있음
- 태스크 큐: 이벤트 발생 후 호출되어야 할 콜백 함수들이 순서대로 기다리는 공간

비동기 함수는 호출 스택으로 가자마자 즉시 백그라운드로 이동 -> 작업이 완료 or 시간 되면 태스크 큐로 이동 -> 호출스택이 비었으면 태스크 큐에서 순서대로 넘어감 -> 실행

태스크 큐에서 호출 스택으로 함수를 보내는 순서는 순차적이 아닌 우선순위가 있다.
ex ) promise.then/catch, process.nextTick는 settimeout보다 우선순위가 높음
프로미스 함수는 내부는 동기이고 then 부터 비동기.
<br />

---

#### 2.2 ES2015 문법

##### 1. const, let

const 는 상수, let은 변수
const, let과 var의 가장 큰 차이점은 블록 스코프(var는 함수 스코프)이다.

<br />

##### 2. 템플릿 문자열

백틱 문자열 안에 ${변수} 처럼 사용

<br />

##### 3. 객체 리터럴

훨씬 간결한 문법으로 객체 리터럴 표현 가능

- 객체의 메서드에 :function을 붙이지 않아도 됨
- { sayNode: sayNode }와 같은 것을 { sayNode }로 축약 가능
- [변수 + 값] 등으로 동적 속성명을 객체 속성 명으로 사용 가능

안써봐서 체감이 잘...

<br />

##### 4. 화살표 함수

const func = () => {}
**화살표 함수가 기존 function() {}을 대체하는 건 아님(this가 달라짐)**
일반 function안의 this는 자신을 가장 마지막으로 품고 있는 scope로 항상 변한다.
화살표 함수는 this와 arguments를 바인딩 하지 않는다.

https://velog.io/@leeeeunz/TIL-34.-Arrow-Function%EA%B3%BC-Function%EC%9D%98-%EC%B0%A8%EC%9D%B4

<br />

##### 5. 비구조화 할당

```
// 기존
const example = {a : 123, b:{c:135,d:146}}
const a = example.a
const d = example.b.d

const arr = [1,2,3,4,5]
const x = arr[0]
const y = arr[1]
const z = arr[4]

// 비구조화 할당
const {a, b:{d}} = example

const [x,y,,,z] = arr
```

<br />

---

#### 2.3 Front-end JS

---

### Chap.2

#### 2.1 호출 스택, 이벤트 루프

#### 2.2 ES2015 문법

#### 2.3 Front-end JS

---
